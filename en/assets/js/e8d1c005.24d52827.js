"use strict";(self.webpackChunkchicken_personal=self.webpackChunkchicken_personal||[]).push([[7439],{49613:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var n=a(59496);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,k=m["".concat(s,".").concat(d)]||m[d]||c[d]||i;return a?n.createElement(k,l(l({ref:t},u),{},{components:a})):n.createElement(k,l({ref:t},u))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},84630:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(88028),r=(a(59496),a(49613));const i={sidebar_position:20,description:"ActiveMQ \u6b0a\u9650\u63a7\u7ba1",key:["ActiveMQ","tool","windows","Message Queue"],tags:["ActiveMQ","\u5de5\u5177","Message Queue"]},l="\ud83e\udde3 ActiveMQ \u6b0a\u9650\u63a7\u7ba1",o={unversionedId:"daylilyTool/toolActiveMQ/setUser",id:"daylilyTool/toolActiveMQ/setUser",title:"\ud83e\udde3 ActiveMQ \u6b0a\u9650\u63a7\u7ba1",description:"ActiveMQ \u6b0a\u9650\u63a7\u7ba1",source:"@site/docs/daylilyTool/toolActiveMQ/setUser.md",sourceDirName:"daylilyTool/toolActiveMQ",slug:"/daylilyTool/toolActiveMQ/setUser",permalink:"/en/docs/daylilyTool/toolActiveMQ/setUser",draft:!1,editUrl:"https://github.com/LonelyYeezhiChicken/chicken-personal/tree/main/docs/daylilyTool/toolActiveMQ/setUser.md",tags:[{label:"ActiveMQ",permalink:"/en/docs/tags/active-mq"},{label:"\u5de5\u5177",permalink:"/en/docs/tags/\u5de5\u5177"},{label:"Message Queue",permalink:"/en/docs/tags/message-queue"}],version:"current",lastUpdatedAt:1700835699,formattedLastUpdatedAt:"Nov 24, 2023",sidebarPosition:20,frontMatter:{sidebar_position:20,description:"ActiveMQ \u6b0a\u9650\u63a7\u7ba1",key:["ActiveMQ","tool","windows","Message Queue"],tags:["ActiveMQ","\u5de5\u5177","Message Queue"]},sidebar:"tutorialSidebar",previous:{title:"\ud83e\udde3 ActiveMQ \u5b89\u88dd - Artemis",permalink:"/en/docs/daylilyTool/toolActiveMQ/inatallInWinArtemis"},next:{title:"\ud83e\udde3 ActiveMQ \u901a\u8a0a\u5354\u8b70",permalink:"/en/docs/daylilyTool/toolActiveMQ/protocol"}},s={},p=[{value:"\u74b0\u5883",id:"\u74b0\u5883",level:2},{value:"Web \u6b0a\u9650\u63a7\u7ba1",id:"web-\u6b0a\u9650\u63a7\u7ba1",level:2},{value:"Web - \u5f8c\u53f0\u767b\u5165\u5e33\u865f\u8cc7\u8a0a",id:"web---\u5f8c\u53f0\u767b\u5165\u5e33\u865f\u8cc7\u8a0a",level:3},{value:"Simple Authentication",id:"simple-authentication",level:2},{value:"\u7c21\u55ae\u9a57\u8b49 - \u8eab\u5206\u8a8d\u8b49",id:"\u7c21\u55ae\u9a57\u8b49---\u8eab\u5206\u8a8d\u8b49",level:3},{value:"\u7c21\u55ae\u9a57\u8b49 - \u89d2\u8272\u6388\u6b0a",id:"\u7c21\u55ae\u9a57\u8b49---\u89d2\u8272\u6388\u6b0a",level:3},{value:"JAAS Authentication",id:"jaas-authentication",level:2},{value:"JAAS - \u4f7f\u7528\u8005\u8a2d\u5b9a",id:"jaas---\u4f7f\u7528\u8005\u8a2d\u5b9a",level:3},{value:"JAAS - \u89d2\u8272\u7fa4\u7d44",id:"jaas---\u89d2\u8272\u7fa4\u7d44",level:3},{value:"JAAS - \u5c6c\u6027\u8a2d\u5b9a",id:"jaas---\u5c6c\u6027\u8a2d\u5b9a",level:3},{value:"JAAS - \u555f\u7528 JAAS",id:"jaas---\u555f\u7528-jaas",level:3}],u={toc:p},m="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(m,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"-activemq-\u6b0a\u9650\u63a7\u7ba1"},"\ud83e\udde3 ActiveMQ \u6b0a\u9650\u63a7\u7ba1"),(0,r.kt)("h2",{id:"\u74b0\u5883"},"\u74b0\u5883"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"windows10 ~ 11 (win64)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://activemq.apache.org/activemq-5016006-release"},"ActiveMQ 5.16.6")," (\u6ce8\u610f\u7248\u672c\u8207 JDK \u7684\u76f8\u5bb9\u6027)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://blog.lychicken.com/docs/daylilyTool/toolScoop/setJdk"},"JDK 1.8"))),(0,r.kt)("h2",{id:"web-\u6b0a\u9650\u63a7\u7ba1"},"Web \u6b0a\u9650\u63a7\u7ba1"),(0,r.kt)("h3",{id:"web---\u5f8c\u53f0\u767b\u5165\u5e33\u865f\u8cc7\u8a0a"},"Web - \u5f8c\u53f0\u767b\u5165\u5e33\u865f\u8cc7\u8a0a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a94\u6848: /conf/jetty-realm.properties"),(0,r.kt)("li",{parentName:"ul"},"\u898f\u5247: \u5e33\u865f: \u5bc6\u78bc, \u89d2\u8272")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Defines users that can access the web (console, demo, etc.)\n# username: password [,rolename ...]\n\nadmin: [\u5bc6\u78bc], admin\nuser: [\u5bc6\u78bc], user\n")),(0,r.kt)("h2",{id:"simple-authentication"},"Simple Authentication"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Client \u7aef\u9023\u7dda\u6642\u9700\u8981\u4f7f\u7528\u7684\u5e33\u865f\u5bc6\u78bc"),(0,r.kt)("p",{parentName:"blockquote"},"\u8a2d\u5b9a\u5b8c\u9700\u91cd\u555f\u670d\u52d9")),(0,r.kt)("h3",{id:"\u7c21\u55ae\u9a57\u8b49---\u8eab\u5206\u8a8d\u8b49"},"\u7c21\u55ae\u9a57\u8b49 - \u8eab\u5206\u8a8d\u8b49"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a94\u6848: /conf/activemq.xml")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u5c6c\u6027"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8aaa\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"username")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u5e33\u865f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"password")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u5bc6\u78bc")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"groups")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u6240\u5c6c\u7684\u7fa4\u7d44")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<broker xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}">\n  <plugins>\n    <simpleAuthenticationPlugin>\n      <users>\n        <authenticationUser username="admin" password="admin1pwd" groups="admins"/>\n        <authenticationUser username="user" password="user-pw" groups="users"/>\n      </users>\n    </simpleAuthenticationPlugin>\n  </plugins>\n</broker>\n')),(0,r.kt)("h3",{id:"\u7c21\u55ae\u9a57\u8b49---\u89d2\u8272\u6388\u6b0a"},"\u7c21\u55ae\u9a57\u8b49 - \u89d2\u8272\u6388\u6b0a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a94\u6848: /conf/activemq.xml")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u5c6c\u6027"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8aaa\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"topic")),(0,r.kt)("td",{parentName:"tr",align:null},"\u8981\u6388\u6b0a\u7684\u4e3b\u984c\uff0c ",(0,r.kt)("inlineCode",{parentName:"td"},">")," \u8868\u793a\u6240\u6709")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"read")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u5bc6\u78bc")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"groups")),(0,r.kt)("td",{parentName:"tr",align:null},"\u4f7f\u7528\u8005\u6240\u5c6c\u7684\u7fa4\u7d44")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c21\u55ae\u9a57\u8b49 - \u6388\u6b0a\u6240\u6709 ",(0,r.kt)("inlineCode",{parentName:"li"},"Topic"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u6388\u6b0a\u6240\u6709 Topic --\x3e\n<broker xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}">\n  <plugins>\n    <simpleAuthenticationPlugin>\n      <users>\n        <authenticationUser username="admin" password="admin1pwd" groups="admins"/>\n        <authenticationUser username="user" password="user-pw" groups="users"/>\n      </users>\n    </simpleAuthenticationPlugin>\n\n    <authorizationPlugin>\n      <map>\n        <authorizationMap>\n          <authorizationEntries>\n            <authorizationEntry topic=">" read="users" write="users" admin="users, admins"/>\n\n            \x3c!-- \u5982\u679c\u6ca1\u6709\u8a2d\u5b9a  topic=">"  \u9700\u8981\u8a2d\u5b9a\u4ee5\u4e0b\u5167\u5bb9\n                <authorizationEntry topic="ActiveMQ.Advisory.>" read="guests, users" write="guests,users" admin="guests,users"/>\n            --\x3e\n          </authorizationEntries>\n        </authorizationMap>\n      </map>\n    </authorizationPlugin>\n  </plugins>\n</broker>\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7c21\u55ae\u9a57\u8b49 - \u6388\u6b0a ",(0,r.kt)("inlineCode",{parentName:"li"},"Topic")," \u9032\u884c\u6388\u6b0a"),(0,r.kt)("li",{parentName:"ul"},"\u9700\u8981\u7279\u5225\u8a2d\u5b9a ",(0,r.kt)("inlineCode",{parentName:"li"},"ActiveMQ.Advisory.>")," \u8b93\u670d\u52d9\u4f7f\u7528")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'\x3c!-- \u6388\u6b0a\u6240\u6709 Topic --\x3e\n<broker xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}">\n  <plugins>\n    <simpleAuthenticationPlugin>\n      <users>\n        <authenticationUser username="admin" password="admin1pwd" groups="admins"/>\n        <authenticationUser username="user" password="user-pw" groups="users"/>\n      </users>\n    </simpleAuthenticationPlugin>\n\n    <authorizationPlugin>\n      <map>\n        <authorizationMap>\n          <authorizationEntries>\n            <authorizationEntry topic="MyTopic" read="users" write="users" admin="users, admins"/>\n            <authorizationEntry topic="TestTopic" read="admins" write="users" admin="users, admins"/>\n            \x3c!-- \u5982\u679c\u6ca1\u6709\u8a2d\u5b9a  topic=">"  \u9700\u8981\u8a2d\u5b9a\u4ee5\u4e0b\u5167\u5bb9 --\x3e\n             <authorizationEntry topic="ActiveMQ.Advisory.>" read="users, admins" write="anonymous, users, admins" admin="anonymous, users, admins"/>\n          </authorizationEntries>\n        </authorizationMap>\n      </map>\n    </authorizationPlugin>\n  </plugins>\n</broker>\n')),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("inlineCode",{parentName:"p"},'topic="ActiveMQ.Advisory.>"')," \u9019\u908a\u7279\u5730\u4f7f\u7528\u4e86 ",(0,r.kt)("inlineCode",{parentName:"p"},"anonymous"),"\uff0c \u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"5.4")," \u7248\u4e4b\u5f8c\uff0c"),(0,r.kt)("p",{parentName:"admonition"},"\u7c21\u55ae\u9a57\u8b49\u63d0\u4f9b\u4e86\u533f\u540d\u8a2a\u554f\u7684\u529f\u80fd\uff0c",(0,r.kt)("inlineCode",{parentName:"p"},"anonymous")," \u5247\u8868\u793a\u533f\u540d\u7684\u7fa4\u7d44")),(0,r.kt)("h2",{id:"jaas-authentication"},"JAAS Authentication"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"JAAS \u8a8d\u8b49\u53ef\u4ee5\u900f\u904e\u4e09\u4efd\u6587\u4ef6\u4f86\u8a2d\u5b9a"),(0,r.kt)("p",{parentName:"blockquote"},"\u4e26\u4e14\u4e0d\u9700\u8981\u91cd\u555f\u670d\u52d9")),(0,r.kt)("h3",{id:"jaas---\u4f7f\u7528\u8005\u8a2d\u5b9a"},"JAAS - \u4f7f\u7528\u8005\u8a2d\u5b9a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a94\u6848: /conf/users.properties"),(0,r.kt)("li",{parentName:"ul"},"\u5132\u5b58\u5e33\u865f\u8207\u5bc6\u78bc"),(0,r.kt)("li",{parentName:"ul"},"\u5bc6\u78bc\u81f3\u5c11\u8981\u5927\u65bc\u56db\u4f4d"),(0,r.kt)("li",{parentName:"ul"},"\u898f\u5247: \u5e33\u865f=\u5bc6\u78bc")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"## username=password\nadmin=admin\nuser1=pwd123\nuser2=pwd456\n")),(0,r.kt)("h3",{id:"jaas---\u89d2\u8272\u7fa4\u7d44"},"JAAS - \u89d2\u8272\u7fa4\u7d44"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a94\u6848: /conf/groups.properties"),(0,r.kt)("li",{parentName:"ul"},"\u8a2d\u5b9a\u89d2\u8272\u7fa4\u7d44"),(0,r.kt)("li",{parentName:"ul"},"\u898f\u5247: \u7fa4\u7d44\u540d\u7a31=\u5e33\u865f1,\u5e33\u865f2")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"## group-name=username1,username2\nadmins=admin,user1\nusers=user1,user2\n")),(0,r.kt)("h3",{id:"jaas---\u5c6c\u6027\u8a2d\u5b9a"},"JAAS - \u5c6c\u6027\u8a2d\u5b9a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a94\u6848: /conf/login.config")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u5c6c\u6027"),(0,r.kt)("th",{parentName:"tr",align:null},"\u8aaa\u660e"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"debug")),(0,r.kt)("td",{parentName:"tr",align:null},"\u767c\u751f\u932f\u8aa4\u6216\u4f8b\u5916\u6642\uff0c\u53ef\u4ee5\u770b\u5230\u8a73\u7d30\u7684\u932f\u8aa4\u8a0a\u606f")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"reload")),(0,r.kt)("td",{parentName:"tr",align:null},"\u5728\u4fee\u6539 ",(0,r.kt)("inlineCode",{parentName:"td"},"users.properties"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"groups.properties")," \u5f8c\u4e0d\u9700\u8981\u91cd\u555f\u670d\u52d9")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"org.apache.activemq.jaas.properties.user")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"td"},"users.properties"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"org.apache.activemq.jaas.properties.group")),(0,r.kt)("td",{parentName:"tr",align:null},"\u6307\u5b9a\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"td"},"groups.properties"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'activemq {\n    org.apache.activemq.jaas.PropertiesLoginModule required\n    debug=true\n    reload=true\n        org.apache.activemq.jaas.properties.user="users.properties"\n        org.apache.activemq.jaas.properties.group="groups.properties";\n};\n')),(0,r.kt)("h3",{id:"jaas---\u555f\u7528-jaas"},"JAAS - \u555f\u7528 JAAS"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u6a94\u6848: /conf/activemq.xml")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},'<broker xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}">\n  <plugins>\n    <jaasAuthenticationPlugin configuration="activemq" />\n    <authorizationPlugin>\n      <map>\n        <authorizationMap>\n          <authorizationEntries>\n            <authorizationEntry topic="TestTopic" read="users, admins" write="users, admins" admin="users, admins"/>\n            <authorizationEntry topic="ActiveMQ.Advisory.>" read="users, admins" write="users, admins" admin="users, admins"/>\n          </authorizationEntries>\n        </authorizationMap>\n      </map>\n    </authorizationPlugin>\n  </plugins>\n</broker>\n')),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"\u6b64\u6a21\u5f0f\u7121\u6cd5\u4f7f\u7528 ",(0,r.kt)("inlineCode",{parentName:"p"},"anonymous"))))}c.isMDXComponent=!0}}]);