import{d as x}from"./micromark-util-decode-string.d7d7e948.js";function L(t){return t.label||!t.identifier?t.label||"":x(t.identifier)}function m(t){const e=t||{},s=e.now||{};let n=e.lineShift||0,l=s.line||1,i=s.column||1;return{move:u,current:r,shift:c};function r(){return{now:{line:l,column:i},lineShift:n}}function c(f){n+=f}function u(f=""){const o=f.split(/\r?\n|\r/g),h=o[o.length-1];return l+=o.length-1,i=o.length===1?i+h.length:1+h.length+n,f}}function I(t,e,s){const n=e.indexStack,l=t.children||[],i=m(s),r=[];let c=-1;for(n.push(-1);++c<l.length;){const f=l[c];n[n.length-1]=c,r.push(i.move(e.handle(f,t,e,{before:`
`,after:`
`,...i.current()}))),f.type!=="list"&&(e.bulletLastUsed=void 0),c<l.length-1&&r.push(i.move(u(f,l[c+1])))}return n.pop(),r.join("");function u(f,o){let h=e.join.length;for(;h--;){const a=e.join[h](f,o,t,e);if(a===!0||a===1)break;if(typeof a=="number")return`
`.repeat(1+a);if(a===!1)return`

<!---->

`}return`

`}}const C=/\r?\n|\r/g;function S(t,e){const s=[];let n=0,l=0,i;for(;i=C.exec(t);)r(t.slice(n,i.index)),s.push(i[0]),n=i.index+i[0].length,l++;return r(t.slice(n)),s.join("");function r(c){s.push(e(c,l,!c))}}function k(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function y(t,e){return g(t,e.inConstruct,!0)&&!g(t,e.notInConstruct,!1)}function g(t,e,s){if(!e)return s;typeof e=="string"&&(e=[e]);let n=-1;for(;++n<e.length;)if(t.includes(e[n]))return!0;return!1}function _(t,e,s){const n=(s.before||"")+(e||"")+(s.after||""),l=[],i=[],r={};let c=-1;for(;++c<t.unsafe.length;){const o=t.unsafe[c];if(!y(t.stack,o))continue;const h=k(o);let a;for(;a=h.exec(n);){const p="before"in o||Boolean(o.atBreak),b="after"in o,d=a.index+(p?a[1].length:0);l.includes(d)?(r[d].before&&!p&&(r[d].before=!1),r[d].after&&!b&&(r[d].after=!1)):(l.push(d),r[d]={before:p,after:b})}}l.sort(j);let u=s.before?s.before.length:0;const f=n.length-(s.after?s.after.length:0);for(c=-1;++c<l.length;){const o=l[c];o<u||o>=f||o+1<f&&l[c+1]===o+1&&r[o].after&&!r[o+1].before&&!r[o+1].after||l[c-1]===o-1&&r[o].before&&!r[o-1].before&&!r[o-1].after||(u!==o&&i.push(w(n.slice(u,o),"\\")),u=o,/[!-/:-@[-`{-~]/.test(n.charAt(o))&&(!s.encode||!s.encode.includes(n.charAt(o)))?i.push("\\"):(i.push("&#x"+n.charCodeAt(o).toString(16).toUpperCase()+";"),u++))}return i.push(w(n.slice(u,f),s.after)),i.join("")}function j(t,e){return t-e}function w(t,e){const s=/\\(?=[!-/:-@[-`{-~])/g,n=[],l=[],i=t+e;let r=-1,c=0,u;for(;u=s.exec(i);)n.push(u.index);for(;++r<n.length;)c!==n[r]&&l.push(t.slice(c,n[r])),l.push("\\"),c=n[r];return l.push(t.slice(c)),l.join("")}function z(t,e,s){const n=e.indexStack,l=t.children||[],i=[];let r=-1,c=s.before;n.push(-1);let u=m(s);for(;++r<l.length;){const f=l[r];let o;if(n[n.length-1]=r,r+1<l.length){let h=e.handle.handlers[l[r+1].type];h&&h.peek&&(h=h.peek),o=h?h(l[r+1],t,e,{before:"",after:"",...u.current()}).charAt(0):""}else o=s.after;i.length>0&&(c==="\r"||c===`
`)&&f.type==="html"&&(i[i.length-1]=i[i.length-1].replace(/(\r?\n|\r)$/," "),c=" ",u=m(s),u.move(i.join(""))),i.push(u.move(e.handle(f,t,e,{...u.current(),before:c,after:o}))),c=i[i.length-1].slice(-1)}return n.pop(),i.join("")}A.peek=B;function A(t,e,s){let n=t.value||"",l="`",i=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(n);)l+="`";for(/[^ \r\n]/.test(n)&&(/^[ \r\n]/.test(n)&&/[ \r\n]$/.test(n)||/^`|`$/.test(n))&&(n=" "+n+" ");++i<s.unsafe.length;){const r=s.unsafe[i],c=k(r);let u;if(!!r.atBreak)for(;u=c.exec(n);){let f=u.index;n.charCodeAt(f)===10&&n.charCodeAt(f-1)===13&&f--,n=n.slice(0,f)+" "+n.slice(u.index+1)}}return l+n+l}function B(){return"`"}function $(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function v(t){const e=t.options.listItemIndent||"tab";if(e===1||e==="1")return"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function M(t,e,s,n){const l=v(s);let i=s.bulletCurrent||$(s);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(s.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let r=i.length+1;(l==="tab"||l==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(r=Math.ceil(r/4)*4);const c=m(n);c.move(i+" ".repeat(r-i.length)),c.shift(r);const u=s.enter("listItem"),f=S(I(t,s,c.current()),o);return u(),f;function o(h,a,p){return a?(p?"":" ".repeat(r))+h:(p?i:i+" ".repeat(r-i.length))+h}}export{L as a,z as b,I as c,A as d,S as i,M as l,_ as s,m as t};
