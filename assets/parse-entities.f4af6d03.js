import{r as ve}from"./character-entities-legacy.af741f7d.js";import{r as de}from"./character-reference-invalid.93d522b8.js";import{i as me}from"./is-decimal.0d4f2058.js";import{i as ue}from"./is-hexadecimal.d90235b6.js";import{i as xe}from"./is-alphanumerical.944fb900.js";var k,he=59,pe=Ce;function Ce(e){var n="&"+e+";",r;return k=k||document.createElement("i"),k.innerHTML=n,r=k.textContent,r.charCodeAt(r.length-1)===he&&e!=="semi"||r===n?!1:r}var J=ve,K=de,be=me,we=ue,Z=xe,ye=pe,Re=Se,ge={}.hasOwnProperty,y=String.fromCharCode,Ee=Function.prototype,Q={warning:null,reference:null,text:null,warningContext:null,referenceContext:null,textContext:null,position:{},additional:null,attribute:!1,nonTerminated:!0},Ae=9,V=10,Ne=12,Te=32,Y=38,$e=59,ke=60,qe=61,Fe=35,De=88,He=120,Pe=65533,g="named",_="hexadecimal",j="decimal",I={};I[_]=16;I[j]=10;var q={};q[g]=Z;q[j]=be;q[_]=we;var ee=1,re=2,ae=3,ne=4,te=5,X=6,ie=7,d={};d[ee]="Named character references must be terminated by a semicolon";d[re]="Numeric character references must be terminated by a semicolon";d[ae]="Named character references cannot be empty";d[ne]="Numeric character references cannot be empty";d[te]="Named character references must be known";d[X]="Numeric character references cannot be disallowed";d[ie]="Numeric character references cannot be outside the permissible Unicode range";function Se(e,n){var r={},b,m;n||(n={});for(m in Q)b=n[m],r[m]=b==null?Q[m]:b;return(r.position.indent||r.position.start)&&(r.indent=r.position.indent||[],r.position=r.position.start),Ue(e,r)}function Ue(e,n){var r=n.additional,b=n.nonTerminated,m=n.text,L=n.reference,M=n.warning,fe=n.textContext,oe=n.referenceContext,le=n.warningContext,F=n.position,ce=n.indent||[],D=e.length,s=0,O=-1,u=F.column||1,R=F.line||1,x="",H=[],w,P,h,f,v,t,a,o,T,S,p,E,C,c,W,A,$,l,i;for(typeof r=="string"&&(r=r.charCodeAt(0)),A=N(),o=M?se:Ee,s--,D++;++s<D;)if(v===V&&(u=ce[O]||1),v=e.charCodeAt(s),v===Y){if(a=e.charCodeAt(s+1),a===Ae||a===V||a===Ne||a===Te||a===Y||a===ke||a!==a||r&&a===r){x+=y(v),u++;continue}for(C=s+1,E=C,i=C,a===Fe?(i=++E,a=e.charCodeAt(i),a===De||a===He?(c=_,i=++E):c=j):c=g,w="",p="",f="",W=q[c],i--;++i<D&&(a=e.charCodeAt(i),!!W(a));)f+=y(a),c===g&&ge.call(J,f)&&(w=f,p=J[f]);h=e.charCodeAt(i)===$e,h&&(i++,P=c===g?ye(f):!1,P&&(w=f,p=P)),l=1+i-C,!h&&!b||(f?c===g?(h&&!p?o(te,1):(w!==f&&(i=E+w.length,l=1+i-E,h=!1),h||(T=w?ee:ae,n.attribute?(a=e.charCodeAt(i),a===qe?(o(T,l),p=null):Z(a)?p=null:o(T,l)):o(T,l))),t=p):(h||o(re,l),t=parseInt(f,I[c]),Xe(t)?(o(ie,l),t=y(Pe)):t in K?(o(X,l),t=K[t]):(S="",_e(t)&&o(X,l),t>65535&&(t-=65536,S+=y(t>>>10|55296),t=56320|t&1023),t=S+y(t))):c!==g&&o(ne,l)),t?(z(),A=N(),s=i-1,u+=i-C+1,H.push(t),$=N(),$.offset++,L&&L.call(oe,t,{start:A,end:$},e.slice(C-1,i)),A=$):(f=e.slice(C-1,i),x+=f,u+=f.length,s=i-1)}else v===10&&(R++,O++,u=0),v===v?(x+=y(v),u++):z();return H.join("");function N(){return{line:R,column:u,offset:s+(F.offset||0)}}function se(B,G){var U=N();U.column+=G,U.offset+=G,M.call(le,d[B],U,B)}function z(){x&&(H.push(x),m&&m.call(fe,x,{start:A,end:N()}),x="")}}function Xe(e){return e>=55296&&e<=57343||e>1114111}function _e(e){return e>=1&&e<=8||e===11||e>=13&&e<=31||e>=127&&e<=159||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534}export{Re as p};
